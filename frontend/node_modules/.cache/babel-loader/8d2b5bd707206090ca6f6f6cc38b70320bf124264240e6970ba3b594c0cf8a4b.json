{"ast":null,"code":"//import { config } from \"@/config\";\nimport { defineComponent } from \"vue\";\nimport store from \"@/store/index\";\nimport router from \"@/router\";\nexport default defineComponent({\n  name: \"LoginForm\",\n  data() {\n    return {\n      user: {\n        email: \"\",\n        password: \"\"\n      },\n      error: {\n        status: false,\n        message: \"default message\"\n      }\n    };\n  },\n  methods: {\n    async login(event) {\n      event.preventDefault();\n      //console.log(\"request received\")\n      const opzioniRichiesta = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(this.user)\n      };\n      //console.log(opzioniRichiesta.body);\n      try {\n        const res = await fetch(`${process.env.VUE_APP_SERVER_API_URL}/api/${process.env.VUE_APP_API_VERSION}/auth/loginUtente`, opzioniRichiesta);\n        const data = await res.json();\n        console.log(data);\n        if (data.success) {\n          //console.log('user logged in ' + data.nome)\n          store.commit(\"setToken\", {\n            user: data.nome,\n            email: data.email,\n            token: data.token\n          });\n          //router.push({ name: \"Dashboard\" });\n        } else {\n          //console.log(\"something went wrong\")\n          this.error.status = true;\n          this.error.message = data?.error || data?.message || \"Unexpected error\";\n        }\n      } catch (error) {\n        this.error.status = true;\n        this.error.message = error || \"Errore inaspettato\";\n      }\n    }\n  }\n});","map":{"version":3,"names":["defineComponent","store","router","name","data","user","email","password","error","status","message","methods","login","event","preventDefault","opzioniRichiesta","method","headers","body","JSON","stringify","res","fetch","process","env","VUE_APP_SERVER_API_URL","VUE_APP_API_VERSION","json","console","log","success","commit","nome","token"],"sources":["/Users/giogav/Desktop/boatify/boatify-project/frontend/src/components/Login.vue"],"sourcesContent":["<template>\n  <form class=\"container\">\n    <div class=\"text-center mb-8\">\n      <h1 class=\"text-4xl font-bold text-white\">BOATIFY</h1>\n      <img src=\"../assets/logo.png\" alt=\"Logo BOATIFY\" class=\"mt-4\" />\n    </div>\n    <div v-if=\"error.status\" class=\"alert alert-danger m-4\" role=\"alert\">\n      <h1 v-text=\"error.message\"></h1>\n    </div>\n    <div class=\"form-group\">\n      <label for=\"exampleInputEmail1\">Email</label>\n      <input\n        type=\"email\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n        placeholder=\"Inserisci la tua email\"\n        v-model=\"user.email\"\n      />\n      <small id=\"emailHelp\" class=\"form-text text-muted\"\n        >We'll never share your email with anyone else.</small\n      >\n    </div>\n    <div class=\"form-group\">\n      <label for=\"exampleInputPassword1\">Password</label>\n      <input\n        type=\"password\"\n        class=\"form-control\"\n        id=\"exampleInputPassword1\"\n        placeholder=\"Password\"\n        v-model=\"user.password\"\n      />\n    </div>\n    <button class=\"btn btn-primary\" @click=\"login\">Login</button>\n    <p class=\"mt-3\">\n      Non hai ancora un account?\n      <router-link :to=\"{ name: 'Registrazione' }\">Registrati</router-link>\n    </p>\n  </form>\n</template>\n\n<script>\n//import { config } from \"@/config\";\nimport { defineComponent } from \"vue\";\nimport store from \"@/store/index\";\nimport router from \"@/router\";\n\nexport default defineComponent({\n  name: \"LoginForm\",\n  data() {\n    return {\n      user: {\n        email: \"\",\n        password: \"\",\n      },\n      error: {\n        status: false,\n        message: \"default message\",\n      },\n    };\n  },\n  methods: {\n    async login(event) {\n      event.preventDefault();\n      //console.log(\"request received\")\n      const opzioniRichiesta = {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(this.user),\n      };\n      //console.log(opzioniRichiesta.body);\n      try {\n        const res = await fetch(\n          `${process.env.VUE_APP_SERVER_API_URL}/api/${process.env.VUE_APP_API_VERSION}/auth/loginUtente`,\n          opzioniRichiesta\n        );\n        const data = await res.json();\n\n        console.log(data);\n        if (data.success) {\n          //console.log('user logged in ' + data.nome)\n          store.commit(\"setToken\", {\n            user: data.nome,\n            email: data.email,\n            token: data.token,\n          });\n          //router.push({ name: \"Dashboard\" });\n        } else {\n          //console.log(\"something went wrong\")\n          this.error.status = true;\n          this.error.message =\n            data?.error || data?.message || \"Unexpected error\";\n        }\n      } catch (error) {\n        this.error.status = true;\n        this.error.message = error || \"Errore inaspettato\";\n      }\n    },\n  },\n});\n</script>\n<style scoped></style>\n"],"mappings":"AA0CA;AACA,SAASA,eAAc,QAAS,KAAK;AACrC,OAAOC,KAAI,MAAO,eAAe;AACjC,OAAOC,MAAK,MAAO,UAAU;AAE7B,eAAeF,eAAe,CAAC;EAC7BG,IAAI,EAAE,WAAW;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE;MACZ,CAAC;MACDC,KAAK,EAAE;QACLC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;MACX;IACF,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,KAAKA,CAACC,KAAK,EAAE;MACjBA,KAAK,CAACC,cAAc,CAAC,CAAC;MACtB;MACA,MAAMC,gBAAe,GAAI;QACvBC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACf,IAAI;MAChC,CAAC;MACD;MACA,IAAI;QACF,MAAMgB,GAAE,GAAI,MAAMC,KAAK,CACpB,GAAEC,OAAO,CAACC,GAAG,CAACC,sBAAuB,QAAOF,OAAO,CAACC,GAAG,CAACE,mBAAoB,mBAAkB,EAC/FX,gBACF,CAAC;QACD,MAAMX,IAAG,GAAI,MAAMiB,GAAG,CAACM,IAAI,CAAC,CAAC;QAE7BC,OAAO,CAACC,GAAG,CAACzB,IAAI,CAAC;QACjB,IAAIA,IAAI,CAAC0B,OAAO,EAAE;UAChB;UACA7B,KAAK,CAAC8B,MAAM,CAAC,UAAU,EAAE;YACvB1B,IAAI,EAAED,IAAI,CAAC4B,IAAI;YACf1B,KAAK,EAAEF,IAAI,CAACE,KAAK;YACjB2B,KAAK,EAAE7B,IAAI,CAAC6B;UACd,CAAC,CAAC;UACF;QACF,OAAO;UACL;UACA,IAAI,CAACzB,KAAK,CAACC,MAAK,GAAI,IAAI;UACxB,IAAI,CAACD,KAAK,CAACE,OAAM,GACfN,IAAI,EAAEI,KAAI,IAAKJ,IAAI,EAAEM,OAAM,IAAK,kBAAkB;QACtD;MACF,EAAE,OAAOF,KAAK,EAAE;QACd,IAAI,CAACA,KAAK,CAACC,MAAK,GAAI,IAAI;QACxB,IAAI,CAACD,KAAK,CAACE,OAAM,GAAIF,KAAI,IAAK,oBAAoB;MACpD;IACF;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}