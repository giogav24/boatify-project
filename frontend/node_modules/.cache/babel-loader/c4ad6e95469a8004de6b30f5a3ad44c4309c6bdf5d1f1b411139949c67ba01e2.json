{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport _imports_0 from '../assets/logo.png';\nconst _hoisted_1 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"text-center mb-8\\\"><h1 class=\\\"text-4xl font-bold text-white\\\">BOATIFY</h1><img src=\\\"\" + _imports_0 + \"\\\" alt=\\\"Logo BOATIFY\\\" class=\\\"mt-4\\\"></div><div class=\\\"form-group\\\"><label for=\\\"exampleInputEmail1\\\">Email</label><input type=\\\"email\\\" class=\\\"form-control\\\" id=\\\"exampleInputEmail1\\\" aria-describedby=\\\"emailHelp\\\" placeholder=\\\"Inserisci la tua email\\\"><small id=\\\"emailHelp\\\" class=\\\"form-text text-muted\\\">We&#39;ll never share your email with anyone else.</small></div><div class=\\\"form-group\\\"><label for=\\\"exampleInputPassword1\\\">Password</label><input type=\\\"password\\\" class=\\\"form-control\\\" id=\\\"exampleInputPassword1\\\" placeholder=\\\"Password\\\"></div><button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">Login</button>\", 4);\nconst _hoisted_5 = {\n  class: \"mt-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"form\", null, [_hoisted_1, _createElementVNode(\"p\", _hoisted_5, [_createTextVNode(\" Non hai ancora un account? \"), _createVNode(_component_router_link, {\n    to: {\n      name: 'Registrazione'\n    }\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Registrati\")]),\n    _: 1 /* STABLE */\n  })])]);\n}","map":{"version":3,"names":["_imports_0","_createStaticVNode","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_5","_createTextVNode","_createVNode","_component_router_link","to","name","default","_withCtx","_"],"sources":["/Users/giogav/Desktop/boatify/boatify-project/frontend/src/components/Login.vue"],"sourcesContent":["<template>\n  <form>\n    <div class=\"text-center mb-8\">\n      <h1 class=\"text-4xl font-bold text-white\">BOATIFY</h1>\n      <img src=\"../assets/logo.png\" alt=\"Logo BOATIFY\" class=\"mt-4\" />\n    </div>\n    <div class=\"form-group\">\n      <label for=\"exampleInputEmail1\">Email</label>\n      <input\n        type=\"email\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n        placeholder=\"Inserisci la tua email\"\n      />\n      <small id=\"emailHelp\" class=\"form-text text-muted\"\n        >We'll never share your email with anyone else.</small\n      >\n    </div>\n    <div class=\"form-group\">\n      <label for=\"exampleInputPassword1\">Password</label>\n      <input\n        type=\"password\"\n        class=\"form-control\"\n        id=\"exampleInputPassword1\"\n        placeholder=\"Password\"\n      />\n    </div>\n    <button type=\"submit\" class=\"btn btn-primary\" >Login</button>\n    <p class=\"mt-3\">\n      Non hai ancora un account?\n      <router-link :to=\"{ name: 'Registrazione' }\">Registrati</router-link>\n    </p>\n  </form>\n</template>\n\n<script>\nimport { config } from \"@/config\";\nimport { defineComponent } from \"vue\";\nimport store from \"@/store/index\";\nimport router from \"@/router\";\n\nexport default defineComponent({\n  name: \"LoginForm\",\n  data() {\n    return {\n      user: {\n        email: \"\",\n        password: \"\",\n      },\n      error: {\n        status: false,\n        message: \"default message\",\n      },\n    };\n  },\n  methods: {\n    async login() {\n      //console.log(\"request received\")\n      const opzioniRichiesta = {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(this.user),\n      };\n      //console.log(opzioniRichiesta.body);\n      try {\n        const res = await fetch(\n          `/api/${config.API_VERSION}/auth/loginUtente`,\n          opzioniRichiesta\n        );\n        const data = await res.json();\n\n        if (data.success) {\n          //console.log('user logged in ' + data.nome)\n          store.commit(\"setToken\", {\n            user: data.nome,\n            email: data.email,\n            token: data.token,\n          });\n          router.push({ name: \"DashBoard\" });\n        } else {\n          //console.log(\"something went wrong\")\n          this.error.status = true;\n          this.error.message =\n            data?.error || data?.message || \"Unexpected error\";\n          console.error(this.error.message);\n        }\n      } catch (error) {\n        console.log(\"Failed fetch\");\n\n        this.error.status = true;\n        this.error.message = error || \"Errore inaspettato\";\n      }\n    },\n  },\n});\n</script>\n<style scoped></style>\n"],"mappings":";OAIWA,UAAwB;gCAJnCC,kBAAA,yGAAAD,UAAA;;EA6BOE,KAAK,EAAC;AAAM;;;uBA5BjBC,mBAAA,CAgCO,eA/BLC,UAGM,EAwBNC,mBAAA,CAGI,KAHJC,UAGI,GAhCRC,gBAAA,CA6BoB,8BAEd,GAAAC,YAAA,CAAqEC,sBAAA;IAAvDC,EAAE,EAAE;MAAAC,IAAA;IAAA;EAAyB;IA/BjDC,OAAA,EAAAC,QAAA,CA+BmD,MAAU,CA/B7DN,gBAAA,CA+BmD,YAAU,E;IA/B7DO,CAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}