{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from \"@/router\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n  name: \"RegistrazioneUtente\",\n  data() {\n    return {\n      user: {\n        nome: \"\",\n        cognome: \"\",\n        nr_telefono: \"\",\n        data_nascita: \"\",\n        email: \"\",\n        password: \"\",\n        conferma_password: \"\",\n        ruolo: \"\" // Imposta il ruolo di default\n      },\n      error: {\n        status: false,\n        message: \"default error message\"\n      }\n    };\n  },\n  methods: {\n    async registrazione(event) {\n      event.preventDefault();\n      if (this.user.password !== this.user.conferma_password) {\n        this.error.status = true;\n        this.error.message = \"Le password inserite non coincidono!\";\n        return;\n      }\n      const opzioniRichiesta = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(this.user)\n      };\n      try {\n        const res = await fetch(`${process.env.VUE_APP_SERVER_API_URL}/api/${process.env.VUE_APP_API_VERSION}/auth/registraUtente`, opzioniRichiesta);\n        const data = await res.json();\n        if (data.success) {\n          router.push({\n            name: \"Login\"\n          });\n        } else {\n          this.error.status = true;\n          this.error.message = data?.error || data?.message || \"Unexpected error\";\n        }\n      } catch (error) {\n        this.error.status = true;\n        this.error.message = error.message || \"Failed to fetch\";\n      }\n    }\n  }\n});","map":{"version":3,"names":["router","defineComponent","name","data","user","nome","cognome","nr_telefono","data_nascita","email","password","conferma_password","ruolo","error","status","message","methods","registrazione","event","preventDefault","opzioniRichiesta","method","headers","body","JSON","stringify","res","fetch","process","env","VUE_APP_SERVER_API_URL","VUE_APP_API_VERSION","json","success","push"],"sources":["/Users/giogav/Desktop/boatify/boatify-project/frontend/src/components/Registrazione.vue"],"sourcesContent":["<template>\n  <form class=\"container\" @submit.prevent=\"registerUser\">\n    <div class=\"text-center mb-8\">\n      <h1 class=\"text-4xl font-bold text-white\">BOATIFY</h1>\n      <img src=\"../assets/logo.png\" alt=\"Logo BOATIFY\" class=\"mt-4\" />\n    </div>\n    <div v-if=\"error.status\" class=\"alert alert-danger m-4\" role=\"alert\">\n      <h1 v-text=\"error.message\"></h1>\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"nome\" class=\"form-label\">Nome</label>\n      <input v-model=\"user.nome\" type=\"text\" class=\"form-control\" id=\"nome\" />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"cognome\" class=\"form-label\">Cognome</label>\n      <input\n        v-model=\"user.cognome\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"cognome\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"prefisso\" class=\"form-label\">Prefisso</label>\n      <select v-model=\"user.prefisso\" class=\"form-select\" id=\"prefisso\">\n        <option value=\"+39\">Italia (+39)</option>\n        <option value=\"+33\">Francia (+33)</option>\n        <option value=\"+49\">Germania (+49)</option>\n        <option value=\"+44\">Regno Unito (+44)</option>\n        <option value=\"+34\">Spagna (+34)</option>\n        <option value=\"+31\">Paesi Bassi (+31)</option>\n        <option value=\"+41\">Svizzera (+41)</option>\n      </select>\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"nr_telefono\" class=\"form-label\">Numero di telefono</label>\n      <div class=\"input-group\">\n        <span class=\"input-group-text\" id=\"prefisso-addon\">{{\n          user.prefisso\n        }}</span>\n        <input\n          v-model=\"user.nr_telefono\"\n          type=\"text\"\n          class=\"form-control\"\n          id=\"nr_telefono\"\n        />\n      </div>\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"data_nascita\" class=\"form-label\"\n        >Data di nascita (YYYY-MM-DD)</label\n      >\n      <input\n        v-model=\"user.data_nascita\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"data_nascita\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"email\" class=\"form-label\">Email</label>\n      <input\n        v-model=\"user.email\"\n        type=\"email\"\n        class=\"form-control\"\n        id=\"email\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"password\" class=\"form-label\">Password</label>\n      <input\n        v-model=\"user.password\"\n        type=\"password\"\n        class=\"form-control\"\n        id=\"password\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"conferma_password\" class=\"form-label\"\n        >Conferma password</label\n      >\n      <input\n        v-model=\"user.conferma_password\"\n        type=\"password\"\n        class=\"form-control\"\n        id=\"conferma_password\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"ruolo\" class=\"form-label\">Ruolo</label>\n      <select v-model=\"user.ruolo\" class=\"form-select\" id=\"ruolo\">\n        <option value=\"Proprietario\">Proprietario</option>\n        <option value=\"Noleggiatore\">Noleggiatore</option>\n      </select>\n    </div>\n    <button class=\"btn btn-primary\" @click=\"registrazione\">Registrati</button>\n  </form>\n</template>\n\n<script>\nimport router from \"@/router\";\n\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"RegistrazioneUtente\",\n  data() {\n    return {\n      user: {\n        nome: \"\",\n        cognome: \"\",\n        nr_telefono: \"\",\n        data_nascita: \"\",\n        email: \"\",\n        password: \"\",\n        conferma_password: \"\",\n        ruolo: \"\", // Imposta il ruolo di default\n      },\n      error: {\n        status: false,\n        message: \"default error message\",\n      },\n    };\n  },\n  methods: {\n    async registrazione(event) {\n      event.preventDefault();\n      if (this.user.password !== this.user.conferma_password) {\n        this.error.status = true;\n        this.error.message = \"Le password inserite non coincidono!\";\n        return;\n      }\n\n      const opzioniRichiesta = {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(this.user),\n      };\n\n      try {\n        const res = await fetch(\n          `${process.env.VUE_APP_SERVER_API_URL}/api/${process.env.VUE_APP_API_VERSION}/auth/registraUtente`,\n          opzioniRichiesta\n        );\n        const data = await res.json();\n\n        if (data.success) {\n          router.push({ name: \"Login\" });\n        } else {\n          this.error.status = true;\n          this.error.message =\n            data?.error || data?.message || \"Unexpected error\";\n        }\n      } catch (error) {\n        this.error.status = true;\n        this.error.message = error.message || \"Failed to fetch\";\n      }\n    },\n  },\n});\n</script>\n\n<style scoped>\n/* Aggiungi stili personalizzati se necessario */\n</style>\n"],"mappings":";AAoGA,OAAOA,MAAK,MAAO,UAAU;AAE7B,SAASC,eAAc,QAAS,KAAK;AAErC,eAAeA,eAAe,CAAC;EAC7BC,IAAI,EAAE,qBAAqB;EAC3BC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,IAAI,EAAE,EAAE;QACRC,OAAO,EAAE,EAAE;QACXC,WAAW,EAAE,EAAE;QACfC,YAAY,EAAE,EAAE;QAChBC,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE,EAAE;QACZC,iBAAiB,EAAE,EAAE;QACrBC,KAAK,EAAE,EAAE,CAAE;MACb,CAAC;MACDC,KAAK,EAAE;QACLC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;MACX;IACF,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,aAAaA,CAACC,KAAK,EAAE;MACzBA,KAAK,CAACC,cAAc,CAAC,CAAC;MACtB,IAAI,IAAI,CAACf,IAAI,CAACM,QAAO,KAAM,IAAI,CAACN,IAAI,CAACO,iBAAiB,EAAE;QACtD,IAAI,CAACE,KAAK,CAACC,MAAK,GAAI,IAAI;QACxB,IAAI,CAACD,KAAK,CAACE,OAAM,GAAI,sCAAsC;QAC3D;MACF;MAEA,MAAMK,gBAAe,GAAI;QACvBC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACrB,IAAI;MAChC,CAAC;MAED,IAAI;QACF,MAAMsB,GAAE,GAAI,MAAMC,KAAK,CACpB,GAAEC,OAAO,CAACC,GAAG,CAACC,sBAAuB,QAAOF,OAAO,CAACC,GAAG,CAACE,mBAAoB,sBAAqB,EAClGX,gBACF,CAAC;QACD,MAAMjB,IAAG,GAAI,MAAMuB,GAAG,CAACM,IAAI,CAAC,CAAC;QAE7B,IAAI7B,IAAI,CAAC8B,OAAO,EAAE;UAChBjC,MAAM,CAACkC,IAAI,CAAC;YAAEhC,IAAI,EAAE;UAAQ,CAAC,CAAC;QAChC,OAAO;UACL,IAAI,CAACW,KAAK,CAACC,MAAK,GAAI,IAAI;UACxB,IAAI,CAACD,KAAK,CAACE,OAAM,GACfZ,IAAI,EAAEU,KAAI,IAAKV,IAAI,EAAEY,OAAM,IAAK,kBAAkB;QACtD;MACF,EAAE,OAAOF,KAAK,EAAE;QACd,IAAI,CAACA,KAAK,CAACC,MAAK,GAAI,IAAI;QACxB,IAAI,CAACD,KAAK,CAACE,OAAM,GAAIF,KAAK,CAACE,OAAM,IAAK,iBAAiB;MACzD;IACF;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}