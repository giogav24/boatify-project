{"ast":null,"code":"import store from \"@/store/index\";\nexport default {\n  data() {\n    return {\n      loading: true,\n      datiUtente: {}\n    };\n  },\n  async mounted() {\n    if (store.state.token) {\n      await this.getDatiUtente();\n    }\n  },\n  methods: {\n    async getDatiUtente() {\n      try {\n        const response = await fetch(`${process.env.VUE_APP_SERVER_API_URL}/api/${process.env.VUE_APP_API_VERSION}/auth/getDatiUtente`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${store.getters.getToken}` // Aggiungi il token alle intestazioni\n          },\n          body: JSON.stringify({\n            email: store.getters.getEmail\n          })\n        });\n        const data = await response.json();\n        if (data.success) {\n          this.datiUtente = data.datiUtente;\n        } else {\n          console.error(\"Errore nel recupero dei dati dell'utente:\", data.message);\n        }\n      } catch (error) {\n        console.error(\"Errore nel recupero dei dati dell'utente:\", error.message);\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["store","data","loading","datiUtente","mounted","state","token","getDatiUtente","methods","response","fetch","process","env","VUE_APP_SERVER_API_URL","VUE_APP_API_VERSION","method","headers","Authorization","getters","getToken","body","JSON","stringify","email","getEmail","json","success","console","error","message"],"sources":["/Users/giogav/Desktop/boatify/boatify-project/frontend/src/components/ProfiloUtente.vue"],"sourcesContent":["<template>\n  <div class=\"profilo-container\">\n    <h1>Dati Utente</h1>\n    <div v-if=\"loading\">Caricamento...</div>\n    <div v-else>\n      <div><strong>Nome:</strong> {{ datiUtente.nome }}</div>\n      <div><strong>Cognome:</strong> {{ datiUtente.cognome }}</div>\n      <div><strong>Email:</strong> {{ datiUtente.email }}</div>\n      <div><strong>Ruolo:</strong> {{ datiUtente.ruolo }}</div>\n      <div>\n        <strong>Numero di Telefono:</strong> {{ datiUtente.numero_di_telefono }}\n      </div>\n      <div>\n        <strong>Patenti:</strong>\n        <ul>\n          <li v-for=\"patente in datiUtente.patenti\" :key=\"patente._id\">\n            {{ patente.tipo }}\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport store from \"@/store/index\";\n\nexport default {\n  data() {\n    return {\n      loading: true,\n      datiUtente: {},\n    };\n  },\n  async mounted() {\n    if (store.state.token) {\n      await this.getDatiUtente();\n    }\n  },\n  methods: {\n    async getDatiUtente() {\n      try {\n        const response = await fetch(\n          `${process.env.VUE_APP_SERVER_API_URL}/api/${process.env.VUE_APP_API_VERSION}/auth/getDatiUtente`,\n          {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${store.getters.getToken}`, // Aggiungi il token alle intestazioni\n            },\n            body: JSON.stringify({ email: store.getters.getEmail }),\n          }\n        );\n\n        const data = await response.json();\n\n        if (data.success) {\n          this.datiUtente = data.datiUtente;\n        } else {\n          console.error(\n            \"Errore nel recupero dei dati dell'utente:\",\n            data.message\n          );\n        }\n      } catch (error) {\n        console.error(\n          \"Errore nel recupero dei dati dell'utente:\",\n          error.message\n        );\n      } finally {\n        this.loading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* Aggiungi stili se necessario */\n</style>\n"],"mappings":"AAyBA,OAAOA,KAAI,MAAO,eAAe;AAEjC,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,IAAI;MACbC,UAAU,EAAE,CAAC;IACf,CAAC;EACH,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,IAAIJ,KAAK,CAACK,KAAK,CAACC,KAAK,EAAE;MACrB,MAAM,IAAI,CAACC,aAAa,CAAC,CAAC;IAC5B;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,MAAME,QAAO,GAAI,MAAMC,KAAK,CACzB,GAAEC,OAAO,CAACC,GAAG,CAACC,sBAAuB,QAAOF,OAAO,CAACC,GAAG,CAACE,mBAAoB,qBAAoB,EACjG;UACEC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE,kBAAkB;YAClCC,aAAa,EAAG,UAASjB,KAAK,CAACkB,OAAO,CAACC,QAAS,EAAC,CAAE;UACrD,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YAAEC,KAAK,EAAEvB,KAAK,CAACkB,OAAO,CAACM;UAAS,CAAC;QACxD,CACF,CAAC;QAED,MAAMvB,IAAG,GAAI,MAAMQ,QAAQ,CAACgB,IAAI,CAAC,CAAC;QAElC,IAAIxB,IAAI,CAACyB,OAAO,EAAE;UAChB,IAAI,CAACvB,UAAS,GAAIF,IAAI,CAACE,UAAU;QACnC,OAAO;UACLwB,OAAO,CAACC,KAAK,CACX,2CAA2C,EAC3C3B,IAAI,CAAC4B,OACP,CAAC;QACH;MACF,EAAE,OAAOD,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CACX,2CAA2C,EAC3CA,KAAK,CAACC,OACR,CAAC;MACH,UAAU;QACR,IAAI,CAAC3B,OAAM,GAAI,KAAK;MACtB;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}